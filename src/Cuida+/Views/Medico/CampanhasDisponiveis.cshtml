@using Cuida_.Models
@model IEnumerable<Campanha>
@{
    Layout = null;
}

@{
    ViewData["Title"] = "Minhas próximas consultas";
    var medicoId = ViewBag.MedicoId as int? ?? 0;
}

<style>
    :root{
        --ink:#111827;
        --brd:#e5e7eb;
        --muted:#6b7280;
        --shadow:0 2px 8px rgba(0,0,0,.06);
        --radius:12px;
        --gap:18px;
        --wrapW:1060px;
        --brand:#0d99ff;
        --brand-hover:#0b86e0;
        --brand-active:#0a78c8;
        --focus:#93c5fd;
    }

    html, body { height:100%; margin:0; background:#fff; }
    .layout { display:flex; min-height:100dvh; width:100%; }
    .content {
        flex:1; display:flex; justify-content:center;
        padding: 24px clamp(10px, 3vw, 24px);
    }
    .wrap { width:min(100%, var(--wrapW)); }

    /* ===== CABEÇALHO (seta + título) ===== */
    .header-line {
        display:flex; align-items:center;
        gap:12px; margin-bottom:20px;
    }
    .back {
        display:flex; align-items:center; justify-content:center;
        width:32px; height:32px; border-radius:50%;
        text-decoration:none; color:#000; font-size:20px;
    }
    .back svg{ width:20px; height:20px; stroke:#000; }
    h1 { margin:0; font-size:20px; font-weight:700; color:#000; }

    /* ===== GRID DE CARDS ===== */
    .cards{ display:grid; gap:var(--gap); grid-template-columns: 1fr; }
    @@media (min-width: 992px){
        .cards{ grid-template-columns: 1fr 1fr; }
    }

    .card{
        background:#f9fafb; border:1px solid var(--brd);
        border-radius:var(--radius); box-shadow:var(--shadow);
        overflow:hidden; /* para o rodapé arredondar junto */
    }

    .card h2{
        margin:14px 14px 0 14px;
        font-size:13px; font-weight:800; text-transform:uppercase;
        color:#111;
    }

    .details{
        display:grid; grid-template-columns:1fr 1fr;
        gap:8px 16px; padding:10px 14px 12px 14px;
    }
    .col ul{ list-style:none; margin:0; padding:0; }
    .li{ display:flex; gap:6px; font-size:12px; line-height:1.5; color:#111827; }
    .k{ color:var(--muted); }

    /* ===== RODAPÉ DO CARD (linha + botão à direita) ===== */
    .card-footer{
        display:flex; justify-content:flex-end; align-items:center;
        gap:8px; padding:10px 14px;
        border-top:1px solid var(--brd);
        background:#ffffff;
        border-radius:0 0 var(--radius) var(--radius);
    }

    /* ===== Botão ADERIR ===== */
    .btn-sm{
        min-width:110px; height:28px;
        border-radius:6px;
        display:grid; place-items:center;
        padding:0 14px;
        color:#fff; text-decoration:none; font-size:12px; font-weight:700;
        letter-spacing:.2px; text-transform:uppercase;
        border:0; cursor:pointer;
        background-color:var(--brand);
        box-shadow:0 1px 0 rgba(0,0,0,.04), 0 2px 6px rgba(13,153,255,.25);
        transition:background-color .15s ease, transform .05s ease, box-shadow .15s ease;
        user-select:none;
    }
    .btn-sm:hover{ background-color:var(--brand-hover); }
    .btn-sm:active{
        background-color:var(--brand-active);
        transform:translateY(1px);
        box-shadow:0 0 0 rgba(0,0,0,0);
    }
    .btn-sm:focus{
        outline:none;
        box-shadow:0 0 0 3px var(--focus);
    }

    /* util se quiser esconder o texto e manter acessibilidade */
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
</style>
@await Html.PartialAsync("_MenuPartial")
<div class="layout">
    <main class="content">
        <div class="wrap">

            <!-- Cabeçalho -->
            <div class="header-line">
                <a class="back" asp-action="Index" title="Voltar" aria-label="Voltar">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
                    </svg>
                </a>
                <h1>Aderir Campanhas</h1>
            </div>

            <!-- Cards -->
            <section class="cards">
                @foreach (var c in Model ?? Enumerable.Empty<Cuida_.Models.Campanha>())
                {
                    <article class="card">
                        <h2>@((c.NomeCampanha ?? "Campanha de Vacinação").ToUpper())</h2>

                        <div class="details">
                            <div class="col">
                                <ul>
                                    <li class="li"><span class="k">Id:</span>        <span>@c.Id</span></li>
                                    <li class="li"><span class="k">Início:</span>    <span>@c.DataInicio.ToString("dd/MM/yyyy")</span></li>
                                    <li class="li"><span class="k">Fim:</span>       <span>@c.DataFim.ToString("dd/MM/yyyy")</span></li>
                                </ul>
                            </div>
                            <div class="col">
                                <ul>
                                    <li class="li"><span class="k">Ativa:</span>     <span>@(c.Ativa ? "Sim" : "Não")</span></li>
                                    <li class="li"><span class="k">Médico:</span>    <span>@medicoId</span></li>
                                    <li class="li"><span class="k">Período:</span>   <span>@c.DataInicio.ToString("MM/yyyy") - @c.DataFim.ToString("MM/yyyy")</span></li>
                                </ul>
                            </div>
                        </div>

                        <!-- Rodapé com botão à direita -->
                        <div class="card-footer">
                            <a class="btn-sm" asp-action="Edit" asp-route-id="@c.Id" title="Aderir" aria-label="Aderir à campanha @c.NomeCampanha">ADERIR</a>
                        </div>
                    </article>
                }

                @if (Model == null || !Model.Any())
                {
                    <article class="card">
                        <h2>Sem campanhas</h2>
                        <div class="details">
                            <div class="col">
                                <ul><li class="li"><span class="k">Aviso:</span><span>Nenhuma campanha cadastrada.</span></li></ul>
                            </div>
                            <div class="col">
                                <ul><li class="li"><span class="k">Ação:</span><span>Crie uma nova campanha.</span></li></ul>
                            </div>
                        </div>
                        <div class="card-footer">
                            <span class="sr-only">Sem ações disponíveis</span>
                        </div>
                    </article>
                }
            </section>
        </div>
    </main>
</div>


